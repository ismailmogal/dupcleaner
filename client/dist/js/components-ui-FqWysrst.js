var e=Object.defineProperty,s=Object.defineProperties,r=Object.getOwnPropertyDescriptors,n=Object.getOwnPropertySymbols,c=Object.prototype.hasOwnProperty,t=Object.prototype.propertyIsEnumerable,a=(s,r,n)=>r in s?e(s,r,{enumerable:!0,configurable:!0,writable:!0,value:n}):s[r]=n;import{j as i,r as l,R as o}from"./components-core-Bxru5Fab.js";import{u as d}from"./contexts-DVWjs8vK.js";import{a as h}from"./components-advanced-DXBWHV3M.js";function p(){const{toggleTheme:e,isDark:s}=d();return i.jsx("div",{className:"theme-toggle",children:i.jsxs("button",{className:"theme-toggle-btn",onClick:e,title:`Switch to ${s?"light":"dark"} mode`,"aria-label":`Switch to ${s?"light":"dark"} mode`,children:[i.jsx("div",{className:"theme-icon",children:s?i.jsx("span",{className:"sun-icon",children:"☀️"}):i.jsx("span",{className:"moon-icon",children:"🌙"})}),i.jsxs("span",{className:"theme-label",children:[s?"Light":"Dark"," Mode"]})]})})}function m({isOpen:e,onClose:o}){const{userPreferences:h,updatePreferences:p}=d(),[m,x]=l.useState(h),u=(e,i)=>{x(l=>{return o=((e,s)=>{for(var r in s||(s={}))c.call(s,r)&&a(e,r,s[r]);if(n)for(var r of n(s))t.call(s,r)&&a(e,r,s[r]);return e})({},l),s(o,r({[e]:i}));var o})};return e?i.jsx("div",{className:"preferences-overlay",children:i.jsxs("div",{className:"preferences-modal",children:[i.jsxs("div",{className:"preferences-header",children:[i.jsx("h3",{children:"User Preferences"}),i.jsx("button",{className:"close-button",onClick:o,children:"×"})]}),i.jsxs("div",{className:"preferences-content",children:[i.jsxs("div",{className:"preferences-section",children:[i.jsx("h4",{children:"View Settings"}),i.jsxs("div",{className:"preference-item",children:[i.jsx("label",{className:"preference-label",children:"File Browser View Mode:"}),i.jsxs("select",{value:m.fileBrowserViewMode,onChange:e=>u("fileBrowserViewMode",e.target.value),className:"preference-select",children:[i.jsx("option",{value:"grid",children:"Grid View"}),i.jsx("option",{value:"list",children:"List View"}),i.jsx("option",{value:"details",children:"Details View"})]})]}),i.jsxs("div",{className:"preference-item",children:[i.jsx("label",{className:"preference-label",children:"Duplicate Manager View Mode:"}),i.jsxs("select",{value:m.duplicateManagerViewMode,onChange:e=>u("duplicateManagerViewMode",e.target.value),className:"preference-select",children:[i.jsx("option",{value:"grid",children:"Grid View"}),i.jsx("option",{value:"list",children:"List View"}),i.jsx("option",{value:"details",children:"Details View"})]})]}),i.jsxs("div",{className:"preference-item",children:[i.jsx("label",{className:"preference-label",children:"Multi-Folder View Mode:"}),i.jsxs("select",{value:m.multiFolderViewMode,onChange:e=>u("multiFolderViewMode",e.target.value),className:"preference-select",children:[i.jsx("option",{value:"grid",children:"Grid View"}),i.jsx("option",{value:"list",children:"List View"}),i.jsx("option",{value:"details",children:"Details View"})]})]})]}),i.jsxs("div",{className:"preferences-section",children:[i.jsx("h4",{children:"Display Options"}),i.jsx("div",{className:"preference-item",children:i.jsxs("label",{className:"preference-checkbox",children:[i.jsx("input",{type:"checkbox",checked:m.showFileSizes,onChange:e=>u("showFileSizes",e.target.checked)}),"Show File Sizes"]})}),i.jsx("div",{className:"preference-item",children:i.jsxs("label",{className:"preference-checkbox",children:[i.jsx("input",{type:"checkbox",checked:m.showFileDates,onChange:e=>u("showFileDates",e.target.checked)}),"Show File Dates"]})}),i.jsx("div",{className:"preference-item",children:i.jsxs("label",{className:"preference-checkbox",children:[i.jsx("input",{type:"checkbox",checked:m.compactMode,onChange:e=>u("compactMode",e.target.checked)}),"Compact Mode"]})})]}),i.jsxs("div",{className:"preferences-section",children:[i.jsx("h4",{children:"Behavior"}),i.jsx("div",{className:"preference-item",children:i.jsxs("label",{className:"preference-checkbox",children:[i.jsx("input",{type:"checkbox",checked:m.autoScan,onChange:e=>u("autoScan",e.target.checked)}),"Auto-scan for duplicates"]})})]})]}),i.jsxs("div",{className:"preferences-footer",children:[i.jsx("button",{className:"cancel-button",onClick:()=>{x(h),o()},children:"Cancel"}),i.jsx("button",{className:"save-button",onClick:()=>{p(m),o()},children:"Save Preferences"})]})]})}):null}const x=()=>{const[e,s]=l.useState(!1);l.useEffect(()=>{const e=localStorage.getItem("analytics_consent");null===e?s(!0):h.setConsent("true"===e)},[]);const r=e=>{h.setConsent(e),localStorage.setItem("analytics_consent",e.toString()),s(!1),h.trackEvent("analytics_consent",{decision:e?"accepted":"declined"})};return e?i.jsx("div",{className:"analytics-consent-banner",children:i.jsxs("div",{className:"consent-content",children:[i.jsxs("div",{className:"consent-text",children:[i.jsx("h4",{children:"🍪 We value your privacy"}),i.jsx("p",{children:"We use analytics to improve your experience and fix issues. Your data is never shared with third parties and is only used to make the app better."})]}),i.jsxs("div",{className:"consent-buttons",children:[i.jsx("button",{className:"consent-btn accept",onClick:()=>r(!0),children:"Accept"}),i.jsx("button",{className:"consent-btn decline",onClick:()=>r(!1),children:"Decline"})]})]})}):null};class u extends o.Component{constructor(e){super(e),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(e){return{hasError:!0}}componentDidCatch(e,s){this.setState({error:e,errorInfo:s})}render(){return this.state.hasError?i.jsx("div",{className:"error-boundary",children:i.jsxs("div",{className:"error-content",children:[i.jsx("h2",{children:"Something went wrong"}),i.jsx("p",{children:"We're sorry, but something unexpected happened. Please try refreshing the page."}),i.jsx("button",{onClick:()=>window.location.reload(),className:"error-reload-btn",children:"Refresh Page"}),i.jsxs("details",{style:{whiteSpace:"pre-wrap",marginTop:"1rem"},children:[i.jsx("summary",{children:"Error Details"}),this.state.error&&this.state.error.toString(),i.jsx("br",{}),this.state.errorInfo.componentStack]})]})}):this.props.children}}export{x as A,u as E,p as T,m as U};
