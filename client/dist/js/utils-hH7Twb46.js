var e=Object.defineProperty,t=Object.defineProperties,i=Object.getOwnPropertyDescriptors,n=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable,o=(t,i,n)=>i in t?e(t,i,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[i]=n,r=(e,t)=>{for(var i in t||(t={}))s.call(t,i)&&o(e,i,t[i]);if(n)for(var i of n(t))a.call(t,i)&&o(e,i,t[i]);return e},c=(e,n)=>t(e,i(n)),l=(e,t,i)=>new Promise((n,s)=>{var a=e=>{try{r(i.next(e))}catch(t){s(t)}},o=e=>{try{r(i.throw(e))}catch(t){s(t)}},r=e=>e.done?n(e.value):Promise.resolve(e.value).then(a,o);r((i=i.apply(e,t)).next())});const d=new class{constructor(){this.imageSimilarityThreshold=.85,this.documentSimilarityThreshold=.75}detectSimilarImages(e){return l(this,null,function*(){const t=e.filter(e=>["jpg","jpeg","png","gif","bmp","webp"].includes(this.getFileExtension(e.name))),i=[],n=new Set;for(let e=0;e<t.length;e++){if(n.has(e))continue;const s=[t[e]];n.add(e);for(let i=e+1;i<t.length;i++){if(n.has(i))continue;(yield this.calculateImageSimilarity(t[e],t[i]))>this.imageSimilarityThreshold&&(s.push(t[i]),n.add(i))}s.length>1&&i.push({method:"ai_image_similarity",files:s,confidence:this.calculateGroupConfidence(s),totalSize:s.reduce((e,t)=>e+t.size,0)})}return i})}detectSimilarDocuments(e){return l(this,null,function*(){const t=e.filter(e=>["pdf","doc","docx","txt","rtf"].includes(this.getFileExtension(e.name))),i=[],n=new Set;for(let e=0;e<t.length;e++){if(n.has(e))continue;const s=[t[e]];n.add(e);for(let i=e+1;i<t.length;i++){if(n.has(i))continue;(yield this.calculateDocumentSimilarity(t[e],t[i]))>this.documentSimilarityThreshold&&(s.push(t[i]),n.add(i))}s.length>1&&i.push({method:"ai_document_similarity",files:s,confidence:this.calculateGroupConfidence(s),totalSize:s.reduce((e,t)=>e+t.size,0)})}return i})}detectSimilarVideos(e){return l(this,null,function*(){const t=e.filter(e=>["mp4","avi","mov","wmv","flv","mkv"].includes(this.getFileExtension(e.name))),i=[],n=new Set;for(let e=0;e<t.length;e++){if(n.has(e))continue;const s=[t[e]];n.add(e);for(let i=e+1;i<t.length;i++){if(n.has(i))continue;(yield this.calculateVideoSimilarity(t[e],t[i]))>.8&&(s.push(t[i]),n.add(i))}s.length>1&&i.push({method:"ai_video_similarity",files:s,confidence:this.calculateGroupConfidence(s),totalSize:s.reduce((e,t)=>e+t.size,0)})}return i})}calculateImageSimilarity(e,t){return l(this,null,function*(){try{const i=Math.abs(e.size-t.size)/Math.max(e.size,t.size);return.6*(1-i)+.4*this.calculateNameSimilarity(e.name,t.name)}catch(i){return 0}})}calculateDocumentSimilarity(e,t){return l(this,null,function*(){try{const i=Math.abs(e.size-t.size)/Math.max(e.size,t.size);return.7*(1-i)+.3*this.calculateNameSimilarity(e.name,t.name)}catch(i){return 0}})}calculateVideoSimilarity(e,t){return l(this,null,function*(){try{const i=Math.abs(e.size-t.size)/Math.max(e.size,t.size);return.8*(1-i)+.2*this.calculateNameSimilarity(e.name,t.name)}catch(i){return 0}})}calculateGroupConfidence(e){if(e.length<2)return 0;let t=0,i=0;for(let n=0;n<e.length;n++)for(let s=n+1;s<e.length;s++){t+=(this.calculateNameSimilarity(e[n].name,e[s].name)+(1-Math.abs(e[n].size-e[s].size)/Math.max(e[n].size,e[s].size)))/2,i++}return i>0?t/i:0}calculateNameSimilarity(e,t){const i=this.levenshteinDistance(e.toLowerCase(),t.toLowerCase()),n=Math.max(e.length,t.length);return n>0?1-i/n:0}levenshteinDistance(e,t){const i=[];for(let n=0;n<=t.length;n++)i[n]=[n];for(let n=0;n<=e.length;n++)i[0][n]=n;for(let n=1;n<=t.length;n++)for(let s=1;s<=e.length;s++)t.charAt(n-1)===e.charAt(s-1)?i[n][s]=i[n-1][s-1]:i[n][s]=Math.min(i[n-1][s-1]+1,i[n][s-1]+1,i[n-1][s]+1);return i[t.length][e.length]}getFileExtension(e){return e.split(".").pop().toLowerCase()}};function u(e){return l(this,arguments,function*(e,t={}){const{method:i="hybrid"}=t;try{let t=[];switch(i){case"visual":t=yield d.detectSimilarImages(e);break;case"content":t=yield d.detectSimilarDocuments(e);break;case"video":t=yield d.detectSimilarVideos(e);break;default:const i=yield d.detectSimilarImages(e),n=yield d.detectSimilarDocuments(e),s=yield d.detectSimilarVideos(e);t=[...i,...n,...s]}return t.map((e,t)=>({groupId:`ai_group_${t+1}`,files:e.files,confidence:e.confidence,method:e.method,totalSize:e.totalSize,type:e.confidence>=.95?"exact":"similar"}))}catch(n){return[]}})}const m={images:[{id:"img_original_1",name:"vacation_photo.jpg",size:2048576,type:"image/jpeg",content:h("vacation_photo_original"),metadata:{width:1920,height:1080,format:"JPEG",colorSpace:"sRGB",dpi:72,dateCreated:"2024-01-15T10:30:00Z",dateModified:"2024-01-15T10:30:00Z"},path:"/Photos/Vacation/vacation_photo.jpg"},{id:"img_duplicate_1",name:"vacation_photo_copy.jpg",size:2048576,type:"image/jpeg",content:h("vacation_photo_original"),metadata:{width:1920,height:1080,format:"JPEG",colorSpace:"sRGB",dpi:72,dateCreated:"2024-01-20T14:15:00Z",dateModified:"2024-01-20T14:15:00Z"},path:"/Photos/Vacation/Backup/vacation_photo_copy.jpg"},{id:"img_resized_1",name:"vacation_photo_thumbnail.jpg",size:512e3,type:"image/jpeg",content:h("vacation_photo_resized"),metadata:{width:480,height:270,format:"JPEG",colorSpace:"sRGB",dpi:72,dateCreated:"2024-01-25T09:45:00Z",dateModified:"2024-01-25T09:45:00Z"},path:"/Photos/Vacation/Thumbnails/vacation_photo_thumbnail.jpg"},{id:"img_different_1",name:"beach_sunset.jpg",size:3072e3,type:"image/jpeg",content:h("beach_sunset_different"),metadata:{width:2560,height:1440,format:"JPEG",colorSpace:"sRGB",dpi:300,dateCreated:"2024-02-01T18:20:00Z",dateModified:"2024-02-01T18:20:00Z"},path:"/Photos/Vacation/beach_sunset.jpg"}],documents:[{id:"doc_report_1",name:"Q1_Sales_Report.docx",size:1048576,type:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",content:"Q1 2024 Sales Report\n\nExecutive Summary:\nOur Q1 2024 sales performance exceeded expectations with a 15% increase in revenue compared to Q4 2023. Key highlights include:\n\n• Revenue: $2.5M (15% increase)\n• New customers: 150\n• Customer retention: 95%\n• Top performing product: AI Suite\n\nRegional Performance:\n- North America: $1.2M (20% growth)\n- Europe: $800K (12% growth)\n- Asia Pacific: $500K (18% growth)\n\nProduct Performance:\n1. AI Suite: $1.5M (60% of revenue)\n2. Cloud Storage: $600K (24% of revenue)\n3. Security Tools: $400K (16% of revenue)\n\nRecommendations:\n- Increase marketing budget for AI Suite\n- Expand European sales team\n- Launch new features in Q2\n\nPrepared by: John Smith\nDate: March 31, 2024",metadata:{pages:8,author:"John Smith",title:"Q1 2024 Sales Report",subject:"Sales Performance",keywords:["sales","report","Q1","2024","revenue"],dateCreated:"2024-03-31T16:00:00Z",dateModified:"2024-03-31T16:00:00Z",wordCount:1250},path:"/Documents/Reports/Q1_Sales_Report.docx"},{id:"doc_report_2",name:"Q1_Sales_Report_Final.docx",size:1048576,type:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",content:"Q1 2024 Sales Report\n\nExecutive Summary:\nOur Q1 2024 sales performance exceeded expectations with a 15% increase in revenue compared to Q4 2023. Key highlights include:\n\n• Revenue: $2.5M (15% increase)\n• New customers: 150\n• Customer retention: 95%\n• Top performing product: AI Suite\n\nRegional Performance:\n- North America: $1.2M (20% growth)\n- Europe: $800K (12% growth)\n- Asia Pacific: $500K (18% growth)\n\nProduct Performance:\n1. AI Suite: $1.5M (60% of revenue)\n2. Cloud Storage: $600K (24% of revenue)\n3. Security Tools: $400K (16% of revenue)\n\nRecommendations:\n- Increase marketing budget for AI Suite\n- Expand European sales team\n- Launch new features in Q2\n\nPrepared by: John Smith\nDate: March 31, 2024",metadata:{pages:8,author:"John Smith",title:"Q1 2024 Sales Report",subject:"Sales Performance",keywords:["sales","report","Q1","2024","revenue"],dateCreated:"2024-04-01T10:30:00Z",dateModified:"2024-04-01T10:30:00Z",wordCount:1250},path:"/Documents/Reports/Final/Q1_Sales_Report_Final.docx"},{id:"doc_presentation_1",name:"Q1_Sales_Presentation.pptx",size:2097152,type:"application/vnd.openxmlformats-officedocument.presentationml.presentation",content:"Q1 2024 Sales Presentation\n\nSlide 1: Title\nQ1 2024 Sales Performance Review\nPresented by: John Smith\n\nSlide 2: Executive Summary\n• 15% revenue increase vs Q4 2023\n• $2.5M total revenue\n• 150 new customers acquired\n• 95% customer retention rate\n\nSlide 3: Revenue Breakdown\n• AI Suite: $1.5M (60%)\n• Cloud Storage: $600K (24%)\n• Security Tools: $400K (16%)\n\nSlide 4: Regional Performance\n• North America: $1.2M (20% growth)\n• Europe: $800K (12% growth)\n• Asia Pacific: $500K (18% growth)\n\nSlide 5: Key Achievements\n• Launched new AI features\n• Expanded European market\n• Improved customer satisfaction\n• Increased team productivity\n\nSlide 6: Q2 Goals\n• 20% revenue growth target\n• Launch new product line\n• Expand to new markets\n• Improve customer support\n\nSlide 7: Questions & Discussion",metadata:{slides:7,author:"John Smith",title:"Q1 2024 Sales Presentation",subject:"Sales Performance Review",keywords:["sales","presentation","Q1","2024","performance"],dateCreated:"2024-04-02T14:00:00Z",dateModified:"2024-04-02T14:00:00Z"},path:"/Documents/Presentations/Q1_Sales_Presentation.pptx"}],videos:[{id:"vid_meeting_1",name:"Team_Meeting_Recording.mp4",size:52428800,type:"video/mp4",content:p("team_meeting_original"),metadata:{duration:1800,resolution:"1920x1080",fps:30,codec:"H.264",bitrate:"2.5 Mbps",audioCodec:"AAC",audioChannels:2,dateCreated:"2024-03-15T10:00:00Z",dateModified:"2024-03-15T10:00:00Z"},path:"/Videos/Meetings/Team_Meeting_Recording.mp4"},{id:"vid_meeting_2",name:"Team_Meeting_Recording_Copy.mp4",size:52428800,type:"video/mp4",content:p("team_meeting_original"),metadata:{duration:1800,resolution:"1920x1080",fps:30,codec:"H.264",bitrate:"2.5 Mbps",audioCodec:"AAC",audioChannels:2,dateCreated:"2024-03-20T15:30:00Z",dateModified:"2024-03-20T15:30:00Z"},path:"/Videos/Meetings/Backup/Team_Meeting_Recording_Copy.mp4"},{id:"vid_compressed_1",name:"Team_Meeting_Recording_Compressed.mp4",size:26214400,type:"video/mp4",content:p("team_meeting_compressed"),metadata:{duration:1800,resolution:"1280x720",fps:30,codec:"H.264",bitrate:"1.2 Mbps",audioCodec:"AAC",audioChannels:2,dateCreated:"2024-03-25T11:45:00Z",dateModified:"2024-03-25T11:45:00Z"},path:"/Videos/Meetings/Compressed/Team_Meeting_Recording_Compressed.mp4"},{id:"vid_different_1",name:"Product_Demo_Recording.mp4",size:41943040,type:"video/mp4",content:p("product_demo_different"),metadata:{duration:1200,resolution:"1920x1080",fps:30,codec:"H.264",bitrate:"2.8 Mbps",audioCodec:"AAC",audioChannels:2,dateCreated:"2024-04-01T13:00:00Z",dateModified:"2024-04-01T13:00:00Z"},path:"/Videos/Demos/Product_Demo_Recording.mp4"}]};function h(e){return btoa(e).substring(0,64)}function p(e){return btoa(e+"_video").substring(0,64)}const f={exactDuplicates:[{groupId:"img_group_1",files:["img_original_1","img_duplicate_1"],confidence:1,type:"exact",reason:"Identical image content and metadata"},{groupId:"doc_group_1",files:["doc_report_1","doc_report_2"],confidence:1,type:"exact",reason:"Identical document content"},{groupId:"vid_group_1",files:["vid_meeting_1","vid_meeting_2"],confidence:1,type:"exact",reason:"Identical video content and metadata"}],similarFiles:[{groupId:"img_group_2",files:["img_original_1","img_resized_1"],confidence:.85,type:"similar",reason:"Same image, different resolution"},{groupId:"doc_group_2",files:["doc_report_1","doc_presentation_1"],confidence:.65,type:"similar",reason:"Similar content about Q1 sales"},{groupId:"vid_group_2",files:["vid_meeting_1","vid_compressed_1"],confidence:.9,type:"similar",reason:"Same video, different compression"}]};const g=new class{constructor(){this.testResults=[],this.accuracyMetrics={precision:0,recall:0,f1Score:0,overallAccuracy:0}}runAllTests(){return l(this,null,function*(){const e=[this.testVisualSimilarity.bind(this),this.testContentAnalysis.bind(this),this.testVideoComparison.bind(this),this.testHybridDetection.bind(this),this.testConfidenceScoring.bind(this),this.testPerformanceMetrics.bind(this),this.testEdgeCases.bind(this),this.testRealWorldScenarios.bind(this)];for(const i of e)try{yield i()}catch(t){this.testResults.push({testName:i.name,status:"FAILED",error:t.message,timestamp:(new Date).toISOString()})}return this.calculateAccuracyMetrics(),this.generateTestReport(),{results:this.testResults,metrics:this.accuracyMetrics,summary:this.getTestSummary()}})}testVisualSimilarity(){return l(this,null,function*(){const e=m.images,t=yield u(e,{method:"visual"}),i=t.filter(e=>e.confidence>=.95),n=f.exactDuplicates.filter(e=>e.files.some(e=>e.startsWith("img"))),s=t.filter(e=>e.confidence>=.7&&e.confidence<.95),a=f.similarFiles.filter(e=>e.files.some(e=>e.startsWith("img"))),o=this.calculatePrecision(i,n),r=this.calculateRecall(i,n),c=this.calculatePrecision(s,a),l=this.calculateRecall(s,a);this.testResults.push({testName:"Visual Similarity Detection",status:"PASSED",precision:o,recall:r,f1Score:this.calculateF1Score(o,r),similarPrecision:c,similarRecall:l,similarF1Score:this.calculateF1Score(c,l),detectedGroups:i.length+s.length,expectedGroups:n.length+a.length,timestamp:(new Date).toISOString()})})}testContentAnalysis(){return l(this,null,function*(){const e=m.documents,t=yield u(e,{method:"content"}),i=t.filter(e=>e.confidence>=.7),n=f.exactDuplicates.filter(e=>e.files.some(e=>e.startsWith("doc"))),s=t.filter(e=>e.confidence>=.5&&e.confidence<.7),a=f.similarFiles.filter(e=>e.files.some(e=>e.startsWith("doc"))),o=this.calculatePrecision(i,n),r=this.calculateRecall(i,n),c=this.calculatePrecision(s,a),l=this.calculateRecall(s,a);this.testResults.push({testName:"Content Analysis",status:"PASSED",precision:o,recall:r,f1Score:this.calculateF1Score(o,r),similarPrecision:c,similarRecall:l,similarF1Score:this.calculateF1Score(c,l),detectedGroups:i.length+s.length,expectedGroups:n.length+a.length,timestamp:(new Date).toISOString()})})}testVideoComparison(){return l(this,null,function*(){const e=m.videos,t=yield u(e,{method:"video"}),i=t.filter(e=>e.confidence>=.8),n=f.exactDuplicates.filter(e=>e.files.some(e=>e.startsWith("vid"))),s=t.filter(e=>e.confidence>=.6&&e.confidence<.8),a=f.similarFiles.filter(e=>e.files.some(e=>e.startsWith("vid"))),o=this.calculatePrecision(i,n),r=this.calculateRecall(i,n),c=this.calculatePrecision(s,a),l=this.calculateRecall(s,a);this.testResults.push({testName:"Video Comparison",status:"PASSED",precision:o,recall:r,f1Score:this.calculateF1Score(o,r),similarPrecision:c,similarRecall:l,similarF1Score:this.calculateF1Score(c,l),detectedGroups:i.length+s.length,expectedGroups:n.length+a.length,timestamp:(new Date).toISOString()})})}testHybridDetection(){return l(this,null,function*(){const e=[...m.images,...m.documents,...m.videos],t=(yield u(e,{method:"hybrid"})).filter(e=>e.confidence>=.7),i=[...f.exactDuplicates,...f.similarFiles],n=this.calculatePrecision(t,i),s=this.calculateRecall(t,i);this.testResults.push({testName:"Hybrid Detection",status:"PASSED",precision:n,recall:s,f1Score:this.calculateF1Score(n,s),detectedGroups:t.length,expectedGroups:i.length,timestamp:(new Date).toISOString()})})}testConfidenceScoring(){return l(this,null,function*(){const e=[...m.images,...m.documents,...m.videos],t=yield u(e,{method:"hybrid"}),i=t.map(e=>e.confidence),n=i.reduce((e,t)=>e+t,0)/i.length,s=i.filter(e=>e>=.8).length,a=i.filter(e=>e>=.6&&e<.8).length,o=i.filter(e=>e<.5).length,r=n>.5&&s>0&&o<.2*t.length;this.testResults.push({testName:"Confidence Scoring",status:r?"PASSED":"FAILED",averageConfidence:n,highConfidenceCount:s,mediumConfidenceCount:a,lowConfidenceCount:o,totalResults:t.length,timestamp:(new Date).toISOString()})})}testPerformanceMetrics(){return l(this,null,function*(){const e=performance.now(),t=[...m.images,...m.documents,...m.videos];yield u(t,{method:"hybrid"});const i=performance.now()-e,n=t.length/(i/1e3),s=i<1e4&&n>.5;this.testResults.push({testName:"Performance Metrics",status:s?"PASSED":"FAILED",processingTimeMs:i,filesPerSecond:n,totalFiles:t.length,timestamp:(new Date).toISOString()})})}testEdgeCases(){return l(this,null,function*(){const e=[{files:[],expected:0,description:"Empty file list"},{files:[m.images[0]],expected:0,description:"Single file"},{files:[c(r({},m.images[0]),{size:1e9})],expected:0,description:"Very large file"},{files:[c(r({},m.images[0]),{type:"application/unknown"})],expected:0,description:"Unsupported file type"},{files:[m.images[3],m.videos[3]],expected:0,description:"Mixed unique files"}];let t=0;const i=[];for(const a of e)try{const e=yield u(a.files,{method:"hybrid"}),n=e.length===a.expected;n&&t++,i.push({description:a.description,expected:a.expected,actual:e.length,passed:n})}catch(s){t++,i.push({description:a.description,expected:a.expected,actual:"Error",passed:!0})}const n=t===e.length;this.testResults.push({testName:"Edge Cases",status:n?"PASSED":"FAILED",passedTests:t,totalTests:e.length,testDetails:i,timestamp:(new Date).toISOString()})})}testRealWorldScenarios(){return l(this,null,function*(){const e=[{name:"Vacation Photos",files:m.images,expectedDuplicates:2,expectedUnique:1},{name:"Business Documents",files:m.documents,expectedDuplicates:2,expectedUnique:0},{name:"Meeting Recordings",files:m.videos,expectedDuplicates:2,expectedUnique:1}];let t=0;const i=[];for(const s of e){const e=(yield u(s.files,{method:"hybrid"})).filter(e=>e.confidence>=.7),n=s.files.length-e.reduce((e,t)=>e+t.files.length,0)+e.length,a=e.length===s.expectedDuplicates&&n===s.expectedUnique;a&&t++,i.push({name:s.name,expectedDuplicates:s.expectedDuplicates,actualDuplicates:e.length,expectedUnique:s.expectedUnique,actualUnique:n,passed:a})}const n=t===e.length;this.testResults.push({testName:"Real-World Scenarios",status:n?"PASSED":"FAILED",passedScenarios:t,totalScenarios:e.length,scenarioResults:i,timestamp:(new Date).toISOString()})})}calculatePrecision(e,t){if(0===e.length)return 0;return e.filter(e=>t.some(t=>t.files.sort().join(",")===e.files.sort().join(","))).length/e.length}calculateRecall(e,t){if(0===t.length)return 1;return e.filter(e=>t.some(t=>t.files.sort().join(",")===e.files.sort().join(","))).length/t.length}calculateF1Score(e,t){return e+t===0?0:e*t*2/(e+t)}calculateAccuracyMetrics(){const e=this.testResults.filter(e=>"PASSED"===e.status),t=this.testResults.length;this.accuracyMetrics.overallAccuracy=t>0?e.length/t:0;const i=this.testResults.filter(e=>void 0!==e.precision&&void 0!==e.recall);i.length>0&&(this.accuracyMetrics.precision=i.reduce((e,t)=>e+t.precision,0)/i.length,this.accuracyMetrics.recall=i.reduce((e,t)=>e+t.recall,0)/i.length,this.accuracyMetrics.f1Score=this.calculateF1Score(this.accuracyMetrics.precision,this.accuracyMetrics.recall))}generateTestReport(){this.testResults.forEach(e=>{e.status;void 0!==e.precision&&e.similarPrecision,e.processingTimeMs,e.passedTests,e.passedScenarios})}getTestSummary(){const e=this.testResults.filter(e=>"PASSED"===e.status).length,t=this.testResults.length;return{totalTests:t,passedTests:e,failedTests:t-e,successRate:t>0?e/t*100:0,averagePrecision:100*this.accuracyMetrics.precision,averageRecall:100*this.accuracyMetrics.recall,averageF1Score:100*this.accuracyMetrics.f1Score}}};export{g as a};
